<div class="col-12 col-md-6 col-lg-7">
  <div *ngIf="purchases$ | async as purchases else loading">
    <div class="w-100 compra" *ngFor="let purchase of purchases">
      <h5 class="mb-3"><strong>{{purchase.mes}} {{purchase.ano}}</strong></h5>

      <div class="card mb-5" style="border-radius: 0;">

        <div class="card-header d-block d-lg-flex justify-content-between align-items-center">
          <div class="mb-3 mb-lg-0">
            <div>Vendido e entrege por</div>
            <h3 class="_color_green mb-0" style="font-weight: 700;">NATURAL</h3>
          </div>
          <div class="d-flex align-items-center">
            <i class="fa fa-exclamation-circle mr-2"></i>
            <h2 class="mb-0">
              {{purchase.purchases.length | currency:'BRL':true:'1.2-2' }}
              <i class="fa fa-angle-right ml-2"></i>
            </h2>
          </div>
        </div>

        <div class="card-body p-0">
          <table class="table mb-0">
            <thead>
              <tr>
                <th style="border-bottom: 0;">Produtos</th>
                <th style="border-bottom: 0;">Data</th>
                <th style="border-bottom: 0;">Subtotal</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of purchase.purchases">
                <td>{{item.product_name}}</td>
                <td>{{item.created_at  | date:'medium'}}</td>
                <td>{{item.price | currency:'BRL':true:'1.2-2'}}</td>
              </tr>
            </tbody>
          </table>

        </div>
        <div class="card-footer text-right bg-transparent">
          <button class="btn text-uppercase btn_green">Repetir pedido</button>
        </div>
      </div>

    </div>
  </div>
  <ng-template #loading>
    <app-loading></app-loading>
  </ng-template>
</div>
